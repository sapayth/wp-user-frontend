!function(e,t){e.fn.listautowidth=function(){return this.each(function(){var t=e(this).width()/e(this).children("li").length;e(this).children("li").each(function(){var n=e(this).outerWidth(!0)-e(this).width();e(this).width(t-n)})})},t.WP_User_Frontend={init:function(){this.enableMultistep(this),e(".wpuf-form").on("click","img.wpuf-clone-field",this.cloneField),e(".wpuf-form").on("click","img.wpuf-remove-field",this.removeField),e(".wpuf-form").on("click","a.wpuf-delete-avatar",this.deleteAvatar),e(".wpuf-form").on("click","a#wpuf-post-draft",this.draftPost),e(".wpuf-form").on("click","button#wpuf-account-update-profile",this.account_update_profile),e(".wpuf-form-add").on("submit",this.formSubmit),e("form#post").on("submit",this.adminPostSubmit),t.matchMedia("(max-width: 600px)").matches&&(e("table.items-table tr td .post-edit-icon").click(function(t){t.preventDefault(),e(this).parents("tr").find(".data-column").toggleClass("flex-column"),e(this).toggleClass("toggle-icon")}),e(".wpuf-dashboard-navigation ul li:first-child").after().click(function(t){t.preventDefault(),e(".wpuf-dashboard-navigation ul li").not(":first").toggle()})),e(".wpuf-form").on("step-change-fieldset",function(e,t,n){if(wpuf_plupload_items.length)for(var i=wpuf_plupload_items.length-1;i>=0;i--)wpuf_plupload_items[i].refresh();if(wpuf_map_items.length)for(i=wpuf_map_items.length-1;i>=0;i--)google.maps.event.trigger(wpuf_map_items[i].map,"resize"),wpuf_map_items[i].map.setCenter(wpuf_map_items[i].center)}),this.ajaxCategory(),e(':submit[name="wpuf_user_subscription_cancel"]').click(function(t){t.preventDefault(),Swal.fire({text:wpuf_frontend.cancelSubMsg,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d54e21",confirmButtonText:wpuf_frontend.delete_it,cancelButtonText:wpuf_frontend.cancel_it,customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"}}).then(function(t){if(!t.isConfirmed)return!1;e("#wpuf_cancel_subscription").submit()})}),this.warningOnExit(),this.handleReadOnly()},warningOnExit:function(){e('input[name="submit"], #wpuf-post-draft').on("click",function(){t.onbeforeunload=null}),e(".wpuf-form-add").on("change",function(){e(".wpuf-form-add input, .wpuf-form-add select, .wpuf-form-add textarea").each(function(n){"hidden"===e(this).attr("type")&&"submit"===e(this).attr("type")&&-1===e(this).val()||(t.onbeforeunload=function(){return"you have changes"})})})},handleReadOnly:function(){e(".wpuf-form .read-only").each(function(){e("input, select, textarea",this).each(function(){e(this).attr("disabled",!0)})})},check_pass_strength:function(){var t=e("#pass1").val();if(e("#pass-strength-result").show(),e("#pass-strength-result").removeClass("short bad good strong"),!t)return e("#pass-strength-result").html("&nbsp;"),void e("#pass-strength-result").hide();if(void 0!==wp.passwordStrength)switch(wp.passwordStrength.meter(t,wp.passwordStrength.userInputDisallowedList(),t)){case 2:e("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:e("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:e("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:e("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:e("#pass-strength-result").addClass("short").html(pwsL10n.short)}},enableMultistep:function(n){var i=this,r=0,s=e(':hidden[name="wpuf_multistep_type"]').val();if(null!=s){if(e("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-prev-btn").first().remove(),e("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-next-btn").last().remove(),e(".wpuf-form fieldset").removeClass("field-active").first().addClass("field-active"),"progressive"==s&&0!=e(".wpuf-form .wpuf-multistep-fieldset").length){e("fieldset.wpuf-multistep-fieldset legend").first();e(".wpuf-multistep-progressbar").html('<div class="wpuf-progress-percentage"></div>');var a=e(".wpuf-multistep-progressbar"),o=e(".wpuf-progress-percentage");e(".wpuf-multistep-progressbar").progressbar({change:function(){o.text(a.progressbar("value")+"%")}}),e(".wpuf-multistep-fieldset legend").hide()}else e(".wpuf-form").each(function(){var t=e(this),n=e(".wpuf-multistep-progressbar",t),i="";n.addClass("wizard-steps"),i+='<ul class="wpuf-step-wizard">',e(".wpuf-multistep-fieldset",this).each(function(){i+="<li>"+e.trim(e("legend",this).text())+"</li>",e("legend",this).hide()}),i+="</ul>",n.append(i),e(".wpuf-step-wizard li",n).first().addClass("active-step"),e(".wpuf-step-wizard",n).listautowidth()});this.change_fieldset(r,s),e("fieldset .wpuf-multistep-prev-btn, fieldset .wpuf-multistep-next-btn").click(function(a){e(this).hasClass("wpuf-multistep-next-btn")?0!=i.formStepCheck("",e(this).closest("fieldset"))&&n.change_fieldset(++r,s):e(this).hasClass("wpuf-multistep-prev-btn")&&n.change_fieldset(--r,s);var o=e("form.wpuf-form-add").offset().top;return t.scrollTo({top:o-32,behavior:"smooth"}),!1})}},change_fieldset:function(t,n){var i=e("fieldset.wpuf-multistep-fieldset").eq(t);e("fieldset.wpuf-multistep-fieldset").removeClass("field-active").eq(t).addClass("field-active"),e(".wpuf-step-wizard li").each(function(){e(this).index()<=t?"step_by_step"==n?e(this).addClass("passed-wpuf-ms-bar"):e(".wpuf-ps-bar",this).addClass("passed-wpuf-ms-bar"):"step_by_step"==n?e(this).removeClass("passed-wpuf-ms-bar"):e(".wpuf-ps-bar",this).removeClass("passed-wpuf-ms-bar")}),e(".wpuf-step-wizard li").removeClass("wpuf-ms-bar-active active-step completed-step"),e(".passed-wpuf-ms-bar").addClass("completed-step").last().addClass("wpuf-ms-bar-active"),e(".wpuf-ms-bar-active").addClass("active-step");var r=e("fieldset.wpuf-multistep-fieldset").eq(t).find("legend").text();if(r=e.trim(r),"progressive"==n&&0!=e(".wpuf-form .wpuf-multistep-fieldset").length){var s=100*(t+1)/e("fieldset.wpuf-multistep-fieldset").length;s=Number(s.toFixed(2));e(".wpuf-multistep-progressbar").progressbar({value:s}),e(".wpuf-progress-percentage").text(r+" ("+s+"%)")}e(".wpuf-form").trigger("step-change-fieldset",[t,i])},ajaxCategory:function(){e(".category-wrap").on("change",".cat-ajax",function(){var t=e(this).data("form-id");currentLevel=parseInt(e(this).parent().attr("level")),WP_User_Frontend.getChildCats(e(this),currentLevel+1,"category",t)})},getChildCats:function(t,n,i,r){var s=e(t).val(),a="wpuf-category-dropdown-lvl-"+n,o=(i=void 0!==i?i:"category",e(t).siblings("span").data("taxonomy"));e.ajax({type:"post",url:wpuf_frontend.ajaxurl,data:{action:"wpuf_get_child_cat",catID:s,nonce:wpuf_frontend.nonce,field_attr:o,form_id:r},beforeSend:function(){e(t).parent().parent().next(".loading").addClass("wpuf-loading")},complete:function(){e(t).parent().parent().next(".loading").removeClass("wpuf-loading")},success:function(r){e(t).parent().nextAll().each(function(){e(this).remove()}),""!=r&&(e(t).parent().addClass("hasChild").parent().append('<div id="'+a+'" level="'+n+'"></div>'),t.parent().parent().find("#"+a).html(r).slideDown("fast")),e(document).trigger("wpuf-ajax-fetched-child-categories",a,n,i)}})},cloneField:function(t){t.preventDefault();var n=e(this).closest("tr"),i=n.clone();i.find("input").val(""),i.find(":checked").attr("checked",""),n.after(i)},removeField:function(){var t=e(this).closest("tr");t.siblings().addBack().length>1&&t.remove()},adminPostSubmit:function(t){t.preventDefault();var n=e(this);if(WP_User_Frontend.validateForm(n))return!0},draftPost:function(t){t.preventDefault();var n=e(this),i=e(this).closest("form"),r=i.serialize()+"&action=wpuf_draft_post",s=i.find('input[type="hidden"][name="post_id"]').val(),a=[];e(".wpuf-rich-validation").each(function(t,n){var i=(n=e(n)).data("id"),r=n.data("name"),s=e.trim(tinyMCE.get(i).getContent());a.push(r+"="+encodeURIComponent(s))}),r=r+"&"+a.join("&"),n.after(' <span class="wpuf-loading"></span>'),e.post(wpuf_frontend.ajaxurl,r,function(t){if(void 0===s){var r='<input type="hidden" name="post_id" value="'+t.post_id+'">';r+='<input type="hidden" name="post_date" value="'+t.date+'">',r+='<input type="hidden" name="post_author" value="'+t.post_author+'">',r+='<input type="hidden" name="comment_status" value="'+t.comment_status+'">',i.append(r)}n.next("span.wpuf-loading").remove(),n.after('<span class="wpuf-draft-saved">&nbsp; '+t.message+"</span>"),e(".wpuf-draft-saved").delay(2500).fadeOut("fast",function(){e(this).remove()})})},account_update_profile:function(t){t.preventDefault();var n=e(this).closest("form");e.post(wpuf_frontend.ajaxurl,n.serialize(),function(e){e.success?(n.find(".wpuf-error").hide(),n.find(".wpuf-success").show()):(n.find(".wpuf-success").hide(),n.find(".wpuf-error").show(),n.find(".wpuf-error").text(e.data))})},formStepCheck:function(e,t){var n=t,i=(n.find("input[type=submit]"),WP_User_Frontend.validateForm(n));return 0==i&&WP_User_Frontend.addErrorNotice(self,"bottom"),i},formSubmit:function(n){n.preventDefault();var i=e(this),r=i.find("input[type=submit]");form_data=WP_User_Frontend.validateForm(i),form_data&&(i.find("li.wpuf-submit").append('<span class="wpuf-loading"></span>'),r.attr("disabled","disabled").addClass("button-primary-disabled"),e.post(wpuf_frontend.ajaxurl,form_data,function(n){if(n.success)e("body").trigger("wpuf:postform:success",n),1==n.show_message?(i.before('<div class="wpuf-success">'+n.message+"</div>"),i.slideUp("fast",function(){i.remove()}),e("html, body").animate({scrollTop:e(".wpuf-success").offset().top-100},"fast")):t.location=n.redirect_to;else{if(void 0!==n.type&&"login"===n.type)return void(confirm(n.error)?t.location=n.redirect_to:(r.removeAttr("disabled"),r.removeClass("button-primary-disabled"),i.find("span.wpuf-loading").remove()));i.find(".g-recaptcha").length>0&&grecaptcha.reset(),Swal.fire({html:n.error,icon:"warning",showCancelButton:!1,confirmButtonColor:"#d54e21",confirmButtonText:"OK",customClass:{cancelButton:"btn btn-danger"}}),r.removeAttr("disabled")}r.removeClass("button-primary-disabled"),i.find("span.wpuf-loading").remove()}))},isTelephoneField:function(t){return e(t).hasClass("wpuf_telephone")&&"yes"===e(t).data("show-list")},validateForm:function(n){var i=[],r=[];if(WP_User_Frontend.removeErrors(n),WP_User_Frontend.removeErrorNotice(n),n.find("input:visible, textarea:visible, select:visible, div.br-widget:visible, .wpuf-rich-validation:visible, div.wpuf-attachment-upload-filelist:visible").each(function(s,a){var o="",d=e(a).data("type"),u=e(a).data("required");switch(d){case"rich":var l=e(a).data("id"),p=e(a).data("name");if(b=e.trim(tinyMCE.get(l).getContent()),"yes"===u&&""===b&&r.push({type:"required",container:a}),WP_User_Frontend.editorLimit.isRestrictionFailed(a)){r.push({type:"limit",container:a});break}var f=WP_User_Frontend.editorContainingShortcode(a);if(f.shortcodeFound){r.push({type:"custom",container:a,message:wpuf_frontend.protected_shortcodes_message.replace("%shortcode%","["+f.shortcode+"]")});break}i.push(p+"="+encodeURIComponent(b));break;case"textarea":case"text":if(b=e.trim(e(a).val()),"yes"===u&&""===b){r.push({type:"required",container:a});break}if(WP_User_Frontend.editorLimit.isRestrictionFailed(a)){r.push({type:"limit",container:a});break}if(WP_User_Frontend.isTelephoneField(a)){var c=t.intlTelInputGlobals.getInstance(a);if(""!==c.getNumber()&&!c.isValidNumber()){r.push({type:"validation",container:a});break}var m=e(a).attr("name"),h=c.getNumber();e("<input>").attr("type","hidden").attr("name",m).attr("value",h).appendTo(n);break}break;case"url":if(b=e.trim(e(a).val()),"yes"===u&&""===b){r.push({type:"required",container:a});break}if(""!==b&&!WP_User_Frontend.isValidURL(b)){r.push({type:"validation",container:a});break}break;case"password":case"confirm_password":var w=e(a).data("repeat"),_=e(a).data("strength"),v=e(a).data("minimum-length");if(b=e.trim(e(a).val()),"yes"===u&&""===b){r.push({type:"required",container:a});break}if(b.length<v){r.push({type:"custom",container:a,message:"Minimum "+v+" character is required"});break}if("yes"===w)e('[data-type="confirm_password"]').eq(0).val()!==b&&r.push({error_type:"mismatch",container:a});if(_){var g=wp.passwordStrength.meter(b,wp.passwordStrength.userInputDisallowedList());"weak"===_&&g<2?r.push({type:"custom",container:a,message:"Password minimum strength should be weak"}):"medium"===_&&g<3?r.push({type:"custom",container:a,message:"Password minimum strength should be medium"}):"strong"===_&&g<4&&r.push({type:"custom",container:a,message:"Password strength should be strong"})}break;case"select":b=e(a).val(),"yes"===u&&"-1"===b&&r.push({type:"required",container:a});break;case"multiselect":b=e(a).val(),"yes"===u&&0===b.length&&r.push({type:"required",container:a});break;case"tax-checkbox":var F=e(a).children().find("input:checked").length;"yes"!==u||F||r.push({type:"required",container:a});break;case"radio":case"checkbox":o=e(a).parents(".wpuf-fields"),F=e(o).find("input:checked").length,"yes"!==u||F||r.push({type:"required",container:a});break;case"file":F=e(a).find("ul").children().length;"yes"!==u||F||r.push({type:"required",container:e(a).closest(".wpuf-fields")});break;case"email":if(b=e(a).val(),"yes"===u&&""===b){r.push({type:"required",container:a});break}""===b||WP_User_Frontend.isValidEmail(b)||r.push({type:"validation",container:a});break;case"url":var b=e(a).val();if("yes"===u&&""===b){r.push({type:"validation",container:a});break}""===b||WP_User_Frontend.isValidURL(b)||r.push({type:"validation",container:a});break;default:if(e(a).attr("id")&&e(a).attr("id").startsWith("wpuf-map")){var y=e(a).parents(".wpuf-form-google-map-container");mapField=e(y).find('input[id^="wpuf-map-lat"]'),u=e(mapField).data("required"),b=e(mapField).val(),"yes"===u&&""===b&&r.push({type:"required",container:y})}e(a).hasClass("br-widget")&&(o=e(a).parents(".wpuf-fields"),u=e(o).find("select.wpuf-ratings").data("required"),F=e(a).find(".br-selected").length,"yes"!==u||F||r.push({type:"required",container:a}))}}),r.length){var s,a=r.length;for(s=0;s<a;s++)WP_User_Frontend.markError(r[s].container,r[s].type,r[s].message);return WP_User_Frontend.addErrorNotice(n,"end"),e(r[0].container).focus(),!1}n.find('li.wpuf-el[style*="display: none"] input').each(function(t,n){switch(e(n).attr("type")){case"url":case"email":e(n).val("")}});var o=n.find(":disabled").removeAttr("disabled"),d=n.serialize();return o.attr("disabled","disabled"),d=d+"&"+i.join("&")},addErrorNotice:function(t,n){"bottom"==n?e(".wpuf-multistep-fieldset:visible").append('<div class="wpuf-errors">'+wpuf_frontend.error_message+"</div>"):e(t).find("li.wpuf-submit").append('<div class="wpuf-errors">'+wpuf_frontend.error_message+"</div>")},removeErrorNotice:function(t){e(t).find(".wpuf-errors").remove()},markError:function(t,n,i){if(e(t).closest("div").addClass("has-error"),n){var r="",s=e(t).data("label");switch(r=s||e(t).closest("li").data("label"),n){case"required":case"mismatch":case"validation":r=r+" "+error_str_obj[n];break;case"limit":r="";break;case"custom":r=i}e(t).siblings(".wpuf-error-msg").remove(),e(t).closest(".wpuf-fields.wpuf-fields-address").length?(e(t).closest("div.wpuf-sub-fields").find("div.wpuf-error-msg").remove(),e(t).closest("div.wpuf-sub-fields").append('<div class="wpuf-error-msg">'+r+"</div>")):(e(t).closest("div.wpuf-fields").find("div.wpuf-error-msg").remove(),e(t).closest("div.wpuf-fields").append('<div class="wpuf-error-msg">'+r+"</div>"))}},removeErrors:function(t){e(t).find(".has-error").removeClass("has-error"),e(".wpuf-error-msg").remove()},isValidEmail:function(e){return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)},isValidURL:function(e){return new RegExp("^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/){1}[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,20}(:[0-9]{1,20})?(\\/.*)?$").test(e)},insertImage:function(t,n){if(e("#"+t).length){var i=new plupload.Uploader({runtimes:"html5,html4",browse_button:t,container:"wpuf-insert-image-container",multipart:!0,multipart_params:{action:"wpuf_insert_image",form_id:e("#"+t).data("form_id")},multiple_queues:!1,multi_selection:!1,urlstream_upload:!0,file_data_name:"wpuf_file",max_file_size:wpuf_upload.max_filesize,url:wpuf_upload.plupload.url,flash_swf_url:wpuf_upload.flash_swf_url,filters:[{title:"Allowed Files",extensions:"jpg,jpeg,gif,png,bmp"}]});i.bind("Init",function(e,t){}),i.bind("FilesAdded",function(t,n){var i=e("#wpuf-insert-image-container");e.each(n,function(e,t){i.append('<div class="upload-item" id="'+t.id+'"><div class="progress progress-striped active"><div class="bar"></div></div></div>')}),t.refresh(),t.start()}),i.bind("QueueChanged",function(e){i.start()}),i.bind("UploadProgress",function(t,n){var i=e("#"+n.id);e(".bar",i).css({width:n.percent+"%"}),e(".percent",i).html(n.percent+"%")}),i.bind("Error",function(e,t){alert("Error #"+t.code+": "+t.message)}),i.bind("FileUploaded",function(t,i,r){if(e("#"+i.id).remove(),"error"!==r.response){if("undefined"!=typeof tinyMCE)if("function"!=typeof tinyMCE.execInstanceCommand){var s=tinyMCE.get("post_content_"+n);null!==s&&s.insertContent(r.response)}else tinyMCE.execInstanceCommand("post_content_"+n,"mceInsertContent",!1,r.response);var a=e("#post_content_"+n);a.val(a.val()+r.response)}else alert("Something went wrong")}),i.init()}},deleteAvatar:function(t){t.preventDefault(),confirm(e(this).data("confirm"))&&e.post(wpuf_frontend.ajaxurl,{action:"wpuf_delete_avatar",_wpnonce:wpuf_frontend.nonce},function(){e(t.target).parent().remove(),e("[id^=wpuf-avatar]").css("display","")})},editorLimit:{bind:function(t,n,i,r,s){"no"===i?(e("textarea#"+n).keyup(function(e){WP_User_Frontend.editorLimit.textLimit.call(this,e,t,r,s)}),e("input#"+n).keyup(function(e){WP_User_Frontend.editorLimit.textLimit.call(this,e,t,r,s)}),e("input#"+n).change(function(e){WP_User_Frontend.editorLimit.textLimit.call(this,e,t,r,s)}),e("textarea#"+n).on("paste",function(n){var i=e(this);setTimeout(function(){WP_User_Frontend.editorLimit.textLimit.call(i,n,t,r,s)},100)}),e("input#"+n).on("paste",function(n){var i=e(this);setTimeout(function(){WP_User_Frontend.editorLimit.textLimit.call(i,n,t,r,s)},100)})):setTimeout(function(){tinyMCE.get(n).onKeyUp.add(function(e,n){WP_User_Frontend.editorLimit.tinymce.onKeyUp(e,n,t,r,s)}),tinyMCE.get(n).onPaste.add(function(e,n){setTimeout(function(){WP_User_Frontend.editorLimit.tinymce.onPaste(e,n,t,r,s)},100)})},1e3)},checkTinyMCERestriction:function(t,n,i){var r=0,s=void 0!==n[0]&&null!==n[0]?parseInt(n[0]):0,a=(void 0!==n[1]&&null!==n[1]&&n[1].trim(),void 0!==n[2]&&null!==n[2]&&n[2].trim(),void 0!==n[3]&&null!==n[3]?n[3].trim():""),o=void 0!==n[4]&&null!==n[4]?n[4].trim():"",d="";"word"===a?(r=WP_User_Frontend.editorLimit.tinymce.getStats(i).words,d="word_"+o):(r=WP_User_Frontend.editorLimit.tinymce.getStats(i).chars,d="char_"+o);wpuf_frontend["word_"+o];return 0!==r&&(r>s&&"max"===o?(WP_User_Frontend.markError(t,"limit"),jQuery(".mce-path-item.mce-last",i.container).html(wpuf_frontend[d]+" "+r+"/"+s),!0):r<s&&"min"===o?(WP_User_Frontend.markError(t,"limit"),WP_User_Frontend.contentLimitMessage(e(t),a,o,s),!0):void 0)},isRestrictionFailed:function(t){var n,i,r=e(t).data("id"),s=(e(t).data("type"),!1),a=null,o="";if(e(t).closest("div.wpuf-fields").hasClass("has-error")&&e(t).closest("div.wpuf-fields").removeClass("has-error"),"undefined"!=typeof tinyMCE&&null!==tinyMCE.get(r)&&(s=!0,(a=tinyMCE.get(r)).focus()),e(t).closest("li.wpuf-el").find("script").html()){var d=e(t).closest("li.wpuf-el").find("script").html();o=d.match(/(?:bind\()(.*?(?=\)))/)?d.match(/(?:bind\()(.*?(?=\)))/)[1].replace(/['"]/g,"").split(","):""}if(s)return WP_User_Frontend.editorLimit.checkTinyMCERestriction(t,o,a);var u=void 0!==o[0]&&null!==o[0]?parseInt(o[0]):0,l=void 0!==o[3]&&null!==o[3]?o[3].trim():"",p=void 0!==o[4]&&null!==o[4]?o[4].trim():"";if(n=e(t).val().trim().length,i=e(t).val().trim().split(" ").length,0===n)return!1;if("word"===l){if(i>u&&"max"===p)return WP_User_Frontend.markError(t,"limit"),!0;if(i<u&&"min"===p)return WP_User_Frontend.markError(t,"limit"),!0}else{if(n>u&&"max"===p)return WP_User_Frontend.markError(t,"limit"),!0;if(n<u&&"min"===p)return WP_User_Frontend.markError(t,"limit"),!0}return!1},tinymce:{getStats:function(e){var t=e.getContent({format:"text"});return{chars:t.length,words:t.split(" ").length}},onKeyUp:function(t,n,i,r,s){var a=e(".wpuf-fields.wpuf_"+t.id);e(a.closest(".wpuf-fields")).hasClass("has-error")&&a.removeClass("has-error");var o=WP_User_Frontend.editorLimit.tinymce.getStats(t).chars;o?("word"===r&&(o=WP_User_Frontend.editorLimit.tinymce.getStats(t).words),i&&o>i&&"max"===s?(WP_User_Frontend.markError(a,"limit"),WP_User_Frontend.contentLimitMessage(e(a),r,s,i)):i&&o<i&&"min"===s?(WP_User_Frontend.markError(a,"limit"),WP_User_Frontend.contentLimitMessage(e(a),r,s,i)):(jQuery(".mce-path-item.mce-last",t.container).html(""),a.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html(""))):a.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html("")},onPaste:function(t,n,i,r,s){var a=t.getContent({format:"text"}),o=a.length,d=e(".wpuf-fields.wpuf_"+t.id);d.closest(".wpuf-fields").hasClass("has-error")&&d.closest(".wpuf-fields").removeClass("has-error"),o&&("word"===r&&(o=a.split(" ").length),i&&o>i&&"max"===s?(WP_User_Frontend.contentLimitMessage(d,r,s,i),WP_User_Frontend.markError(d,"limit")):i&&o<i&&"min"===s?(WP_User_Frontend.contentLimitMessage(d,r,s,i),WP_User_Frontend.markError(d,"limit")):d.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html(""),WP_User_Frontend.editorLimit.make_media_embed_code(a,t))}},textLimit:function(t,n,i,r){var s=e(this),a=s.val().length;s.closest(".wpuf-fields").hasClass("has-error")&&s.closest(".wpuf-fields").removeClass("has-error"),a&&("word"===i&&(a=s.val().split(" ").length),n&&a>n&&"max"===r?(WP_User_Frontend.contentLimitMessage(s,i,r,n),WP_User_Frontend.markError(s,"limit")):n&&a<n&&"min"===r?(WP_User_Frontend.contentLimitMessage(s,i,r,n),WP_User_Frontend.markError(s,"limit")):s.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html(""),"paste"===t.type&&(n&&a>n&&"max"===r?(WP_User_Frontend.contentLimitMessage(s,i,r,n),WP_User_Frontend.markError(s,"limit")):n&&a<n&&"min"===r?(WP_User_Frontend.contentLimitMessage(s,i,r,n),WP_User_Frontend.markError(s,"limit")):s.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html("")))},blockTyping:function(t){-1!==e.inArray(t.keyCode,[46,8,9,27,13,110,190,189])||65==t.keyCode&&!0===t.ctrlKey||t.keyCode>=35&&t.keyCode<=40||(t.preventDefault(),t.stopPropagation())},make_media_embed_code:function(t,n){e.post(ajaxurl,{action:"wpuf_make_media_embed_code",content:t},function(e){n.setContent(n.getContent()+n.setContent(e))})}},doUncheckRadioBtn:function(e){e.checked=!1},contentLimitMessage:function(e,t,n,i){var r="";"word"===t?"min"===n?(r=wpuf_frontend.word_min_title+"<br>",r+=wpuf_frontend.word_min_details.replace("%number%",i)):(r=wpuf_frontend.word_max_title+"<br>",r+=wpuf_frontend.word_max_details.replace("%number%",i)):"min"===n?(r=wpuf_frontend.char_min_title+"<br>",r+=wpuf_frontend.char_min_details.replace("%number%",i)):(r=wpuf_frontend.char_max_title+"<br>",r+=wpuf_frontend.char_max_details.replace("%number%",i)),e.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html(r)},editorContainingShortcode:function(t){var n=e(t).data("id"),i=e.trim(tinyMCE.get(n).getContent()).toLowerCase(),r=wpuf_frontend.protected_shortcodes;if(!r)return{shortcodeFound:!1};for(var s=0;s<r.length;s++){var a=r[s];if(new RegExp(a).test(i))return{shortcodeFound:!0,shortcode:a}}return{shortcodeFound:!1}}},e(function(){(WP_User_Frontend.init(),e("ul.wpuf-payment-gateways").on("click","input[type=radio]",function(t){e(".wpuf-payment-instruction").slideUp(250),e(this).parents("li").find(".wpuf-payment-instruction").slideDown(250)}),e("ul.wpuf-payment-gateways li").find("input[type=radio]").is(":checked"))?e("ul.wpuf-payment-gateways li").find("input[type=radio]:checked").parents("li").find(".wpuf-payment-instruction").slideDown(250):e("ul.wpuf-payment-gateways li").first().find("input[type=radio]").click()}),e(function(){e('input[name="first_name"], input[name="last_name"]').on("change keyup",function(){var t,n=e.makeArray(e('input[name="first_name"], input[name="last_name"]').map(function(){if(t=e(this).val())return t})).join(" ");e('input[name="display_name"]').val(n)})}),e(function(e){e('.wpuf-form-add input[name="dokan_store_name"]').on("focusout",function(){var t=e(this).val().toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");e('input[name="shopurl"]').val(t),e("#url-alart").text(t),e('input[name="shopurl"]').focus()}),e('.wpuf-form-add input[name="shopurl"]').keydown(function(t){e(this).val();-1!==e.inArray(t.keyCode,[46,8,9,27,13,91,109,110,173,189,190])||65==t.keyCode&&!0===t.ctrlKey||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||(t.keyCode<65||t.keyCode>90)&&(t.keyCode<48||t.keyCode>57))&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()}),e('.wpuf-form-add input[name="shopurl"]').keyup(function(t){e("#url-alart").text(e(this).val())}),e('.wpuf-form-add input[name="shopurl"]').on("focusout",function(){var t=e(this),n={action:"shop_url",url_slug:t.val(),_nonce:dokan.nonce};""!==t.val()&&e.post(dokan.ajaxurl,n,function(t){0==t?(e("#url-alart").removeClass("text-success").addClass("text-danger"),e("#url-alart-mgs").removeClass("text-success").addClass("text-danger").text(dokan.seller.notAvailable)):(e("#url-alart").removeClass("text-danger").addClass("text-success"),e("#url-alart-mgs").removeClass("text-danger").addClass("text-success").text(dokan.seller.available))})}),e(".wpuf-form-add #wpuf-map-add-location").attr("name","find_address")})}(jQuery,window);